
Running 1 test for test/foundry/4337/Specific4337Tests.t.sol:Specific4337Tests
[32m[PASS][0m testToken():(address) (gas: 2382)
Test result: [32mok[0m. 1 passed; 0 failed; finished in 1.90s

Running 14 tests for test/foundry/paymaster/OpenfortPaymasterTest.t.sol:OpenfortPaymasterTest
[32m[PASS][0m testEntryPointDepositToPaymaster() (gas: 45021)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigExecBatchInsufficientERC20() (gas: 319856)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigSmallApprove() (gas: 279828)
[32m[PASS][0m testInitialParameters() (gas: 13782)
[32m[PASS][0m testParsePaymasterDataERC20() (gas: 35513)
[32m[PASS][0m testParsePaymasterDataNative() (gas: 33247)
[32m[PASS][0m testPaymasterAddStake() (gas: 47881)
[32m[PASS][0m testPaymasterUserOpERC20ValidSig() (gas: 300489)
[32m[PASS][0m testPaymasterUserOpERC20ValidSigExecBatch() (gas: 341300)
[32m[PASS][0m testPaymasterUserOpNativeValidSig() (gas: 230754)
[32m[PASS][0m testPaymasterUserOpNativeValidSigExecBatch() (gas: 273169)
[32m[PASS][0m testPaymasterUserOpWrongSig() (gas: 133317)
[32m[PASS][0m testPaymasterUserOpWrongSigLength() (gas: 103571)
[32m[PASS][0m testToken():(address) (gas: 2383)
Test result: [32mok[0m. 14 passed; 0 failed; finished in 2.88s

Running 29 tests for test/foundry/core/upgradeable/UpgradeableOpenfortAccountTest.t.sol:UpgradeableOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 231956)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 381333)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 293095)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 206535)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 375044)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 572021)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 347624)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 480162)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 386336)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 227635)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 409500)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 204418)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 401016)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 230179)
[32m[PASS][0m testIncrementCounterDirect() (gas: 223174)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 374498)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 386728)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 404052)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 373903)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 429618)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 452995)
[32m[PASS][0m testMintTokenAccount() (gas: 403351)
[32m[PASS][0m testReceiveNativeToken() (gas: 199099)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 484886)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 594351)
[32m[PASS][0m testSimulateValidation() (gas: 300257)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 307594)
[32m[PASS][0m testUpgradeAccount() (gas: 2473820)
Test result: [32mok[0m. 29 passed; 0 failed; finished in 3.28s

Running 30 tests for test/foundry/core/static/StaticOpenfortAccountTest.t.sol:StaticOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 174591)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 323573)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 225651)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 139646)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 256326)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 513242)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 290564)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 422239)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 329031)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 170541)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 385559)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 352129)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 147484)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 343645)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 173085)
[32m[PASS][0m testIncrementCounterDirect() (gas: 166279)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 317164)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 329394)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 346568)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 316620)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 372157)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 395178)
[32m[PASS][0m testMintTokenAccount() (gas: 346017)
[32m[PASS][0m testReceiveNativeToken() (gas: 142185)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 426762)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 535415)
[32m[PASS][0m testSimulateValidation() (gas: 243391)
[32m[PASS][0m testToken():(address) (gas: 2404)
[32m[PASS][0m testTransferOutNativeToken() (gas: 250263)
[32m[PASS][0m testUpdateEntryPoint() (gas: 538664)
Test result: [32mok[0m. 30 passed; 0 failed; finished in 3.56s

Running 30 tests for test/foundry/core/managed/ManagedOpenfortAccountTest.t.sol:ManagedOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 249782)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 400307)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 312124)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 224463)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 403280)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 593507)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 364573)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 499353)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 403840)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 244596)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 461352)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 427026)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 220812)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 418542)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 247140)
[32m[PASS][0m testIncrementCounterDirect() (gas: 239574)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 391968)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 404232)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 422139)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 391432)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 447699)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 471727)
[32m[PASS][0m testMintTokenAccount() (gas: 420989)
[32m[PASS][0m testReceiveNativeToken() (gas: 215639)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 504635)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 616323)
[32m[PASS][0m testSimulateValidation() (gas: 316639)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 325266)
[32m[PASS][0m testUpgradeTo() (gas: 2077363)
Test result: [32mok[0m. 30 passed; 0 failed; finished in 3.56s
| EntryPoint contract |                 |       |        |       |         |
|---------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost     | Deployment Size |       |        |       |         |
| 0                   | 0               |       |        |       |         |
| Function Name       | min             | avg   | median | max   | # calls |
| addStake            | 25917           | 25917 | 25917  | 25917 | 1       |
| balanceOf           | 594             | 1260  | 594    | 2594  | 3       |
| depositTo           | 2606            | 10839 | 5406   | 24506 | 3       |


| contracts/core/managed/ManagedOpenfortAccount.sol:ManagedOpenfortAccount contract |                 |       |        |       |         |
|-----------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                   | Deployment Size |       |        |       |         |
| 1806914                                                                           | 9182            |       |        |       |         |
| Function Name                                                                     | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                   | 1996            | 1996  | 1996   | 1996  | 2       |
| execute                                                                           | 3568            | 21350 | 21542  | 32768 | 17      |
| executeBatch                                                                      | 25603           | 25603 | 25603  | 25603 | 2       |
| initialize                                                                        | 50619           | 50619 | 50619  | 50619 | 30      |
| receive                                                                           | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                         | 24617           | 24622 | 24617  | 24629 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                  | 24367           | 24371 | 24367  | 24379 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                        | 1288            | 39642 | 47313  | 47313 | 6       |
| revokeSessionKey                                                                  | 609             | 609   | 609    | 609   | 2       |
| sessionKeys                                                                       | 810             | 810   | 810    | 810   | 3       |
| transferOwnership                                                                 | 22375           | 22375 | 22375  | 22375 | 2       |
| validateUserOp                                                                    | 5005            | 7241  | 6740   | 15510 | 49      |
| version                                                                           | 259             | 259   | 259    | 259   | 1       |


| contracts/core/managed/ManagedOpenfortFactory.sol:ManagedOpenfortFactory contract |                 |        |        |        |         |
|-----------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                   | Deployment Size |        |        |        |         |
| 802970                                                                            | 4253            |        |        |        |         |
| Function Name                                                                     | min             | avg    | median | max    | # calls |
| createAccount                                                                     | 7695            | 184462 | 196740 | 196740 | 31      |
| createAccountWithNonce                                                            | 189793          | 189793 | 189793 | 189793 | 1       |
| getAddress                                                                        | 7065            | 7065   | 7065   | 7065   | 4       |


| contracts/core/managed/OpenfortBeacon.sol:OpenfortBeacon contract |                 |      |        |      |         |
|-------------------------------------------------------------------|-----------------|------|--------|------|---------|
| Deployment Cost                                                   | Deployment Size |      |        |      |         |
| 213861                                                            | 1248            |      |        |      |         |
| Function Name                                                     | min             | avg  | median | max  | # calls |
| implementation                                                    | 308             | 672  | 308    | 2308 | 159     |
| upgradeTo                                                         | 2510            | 4659 | 4659   | 6809 | 2       |


| contracts/core/static/StaticOpenfortAccount.sol:StaticOpenfortAccount contract |                 |       |        |       |         |
|--------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                | Deployment Size |       |        |       |         |
| 1877392                                                                        | 9534            |       |        |       |         |
| Function Name                                                                  | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                | 1944            | 1944  | 1944   | 1944  | 2       |
| entryPoint                                                                     | 376             | 376   | 376    | 376   | 2       |
| execute                                                                        | 3708            | 22011 | 21747  | 32908 | 20      |
| executeBatch                                                                   | 25743           | 40742 | 48408  | 55408 | 5       |
| initialize                                                                     | 74366           | 74366 | 74366  | 74366 | 44      |
| receive                                                                        | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                      | 24757           | 24762 | 24757  | 24769 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                               | 24485           | 24489 | 24485  | 24497 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                     | 1340            | 39694 | 47365  | 47365 | 6       |
| revokeSessionKey                                                               | 749             | 749   | 749    | 749   | 2       |
| sessionKeys                                                                    | 832             | 832   | 832    | 832   | 3       |
| transferOwnership                                                              | 22375           | 22375 | 22375  | 22375 | 2       |
| updateEntryPoint                                                               | 651             | 1483  | 1483   | 2315  | 2       |
| validateUserOp                                                                 | 5145            | 7629  | 6880   | 15650 | 57      |


| contracts/core/static/StaticOpenfortFactory.sol:StaticOpenfortFactory contract |                 |        |        |        |         |
|--------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                | Deployment Size |        |        |        |         |
| 366774                                                                         | 2178            |        |        |        |         |
| Function Name                                                                  | min             | avg    | median | max    | # calls |
| createAccount                                                                  | 1273            | 120553 | 124200 | 124200 | 44      |
| createAccountWithNonce                                                         | 121729          | 121729 | 121729 | 121729 | 1       |
| getAddress                                                                     | 830             | 830    | 830    | 830    | 4       |


| contracts/core/upgradeable/UpgradeableOpenfortAccount.sol:UpgradeableOpenfortAccount contract |                 |       |        |       |         |
|-----------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                               | Deployment Size |       |        |       |         |
| 2237283                                                                                       | 11381           |       |        |       |         |
| Function Name                                                                                 | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                               | 1962            | 1962  | 1962   | 1962  | 2       |
| execute                                                                                       | 3708            | 21354 | 21682  | 32908 | 17      |
| executeBatch                                                                                  | 25743           | 25743 | 25743  | 25743 | 2       |
| initialize                                                                                    | 72911           | 72911 | 72911  | 72911 | 29      |
| receive                                                                                       | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                                     | 24735           | 24740 | 24735  | 24747 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                              | 24485           | 24489 | 24485  | 24497 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                    | 1406            | 38226 | 47431  | 47431 | 5       |
| revokeSessionKey                                                                              | 771             | 771   | 771    | 771   | 2       |
| sessionKeys                                                                                   | 832             | 832   | 832    | 832   | 2       |
| transferOwnership                                                                             | 22375           | 22375 | 22375  | 22375 | 2       |
| upgradeTo                                                                                     | 890             | 3226  | 3226   | 5562  | 2       |
| validateUserOp                                                                                | 5145            | 7029  | 6880   | 12521 | 47      |
| version                                                                                       | 303             | 303   | 303    | 303   | 1       |


| contracts/core/upgradeable/UpgradeableOpenfortFactory.sol:UpgradeableOpenfortFactory contract |                 |        |        |        |         |
|-----------------------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                               | Deployment Size |        |        |        |         |
| 708540                                                                                        | 3899            |        |        |        |         |
| Function Name                                                                                 | min             | avg    | median | max    | # calls |
| createAccount                                                                                 | 6652            | 174806 | 180901 | 180901 | 29      |
| createAccountWithNonce                                                                        | 178454          | 178454 | 178454 | 178454 | 1       |
| getAddress                                                                                    | 6022            | 6022   | 6022   | 6022   | 4       |


| contracts/mock/MockedV2ManagedOpenfortAccount.sol:MockedV2ManagedOpenfortAccount contract |                 |     |        |     |         |
|-------------------------------------------------------------------------------------------|-----------------|-----|--------|-----|---------|
| Deployment Cost                                                                           | Deployment Size |     |        |     |         |
| 1806914                                                                                   | 9182            |     |        |     |         |
| Function Name                                                                             | min             | avg | median | max | # calls |
| version                                                                                   | 259             | 259 | 259    | 259 | 2       |


| contracts/mock/MockedV2UpgradeableOpenfortAccount.sol:MockedV2UpgradeableOpenfortAccount contract |                 |     |        |     |         |
|---------------------------------------------------------------------------------------------------|-----------------|-----|--------|-----|---------|
| Deployment Cost                                                                                   | Deployment Size |     |        |     |         |
| 2237283                                                                                           | 11381           |     |        |     |         |
| Function Name                                                                                     | min             | avg | median | max | # calls |
| proxiableUUID                                                                                     | 374             | 374 | 374    | 374 | 1       |
| version                                                                                           | 303             | 303 | 303    | 303 | 1       |


| contracts/paymaster/OpenfortPaymaster.sol:OpenfortPaymaster contract |                 |       |        |       |         |
|----------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                      | Deployment Size |       |        |       |         |
| 1215863                                                              | 6347            |       |        |       |         |
| Function Name                                                        | min             | avg   | median | max   | # calls |
| addStake                                                             | 520             | 30701 | 33420  | 33420 | 16      |
| deposit                                                              | 9845            | 32618 | 34245  | 34245 | 15      |
| entryPoint                                                           | 261             | 261   | 261    | 261   | 1       |
| getDeposit                                                           | 1181            | 2104  | 1181   | 3181  | 13      |
| getHash                                                              | 3462            | 5053  | 4998   | 6535  | 12      |
| owner                                                                | 2365            | 2365  | 2365   | 2365  | 7       |
| parsePaymasterAndData                                                | 1516            | 1516  | 1516   | 1516  | 2       |
| postOp                                                               | 1433            | 12421 | 5583   | 30248 | 6       |
| validatePaymasterUserOp                                              | 1694            | 26885 | 30289  | 31112 | 8       |


| node_modules/@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol:ERC1967Proxy contract |                 |       |        |       |         |
|-------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                           | Deployment Size |       |        |       |         |
| 136587                                                                                    | 1505            |       |        |       |         |
| Function Name                                                                             | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                           | 2276            | 2276  | 2276   | 2276  | 2       |
| execute                                                                                   | 4118            | 21774 | 22098  | 33318 | 17      |
| executeBatch                                                                              | 26255           | 26255 | 26255  | 26255 | 2       |
| receive                                                                                   | 454             | 454   | 454    | 454   | 2       |
| registerSessionKey(address,uint48,uint48)                                                 | 25139           | 25144 | 25139  | 25151 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                          | 24895           | 24899 | 24895  | 24907 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                | 1907            | 38668 | 47859  | 47859 | 5       |
| revokeSessionKey                                                                          | 1170            | 1170  | 1170   | 1170  | 2       |
| sessionKeys                                                                               | 1248            | 1248  | 1248   | 1248  | 2       |
| transferOwnership                                                                         | 22770           | 22770 | 22770  | 22770 | 2       |
| upgradeTo                                                                                 | 1301            | 3629  | 3629   | 5957  | 2       |
| validateUserOp                                                                            | 5691            | 7603  | 7432   | 13171 | 47      |
| version                                                                                   | 698             | 698   | 698    | 698   | 2       |


| node_modules/@openzeppelin/contracts/proxy/beacon/BeaconProxy.sol:BeaconProxy contract |                 |       |        |       |         |
|----------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                        | Deployment Size |       |        |       |         |
| 151292                                                                                 | 1964            |       |        |       |         |
| Function Name                                                                          | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                        | 2871            | 2871  | 2871   | 2871  | 2       |
| execute                                                                                | 4673            | 22466 | 22653  | 33873 | 17      |
| executeBatch                                                                           | 26810           | 26810 | 26810  | 26810 | 2       |
| receive                                                                                | 1155            | 1155  | 1155   | 1155  | 2       |
| registerSessionKey(address,uint48,uint48)                                              | 25719           | 25724 | 25719  | 25731 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                       | 25472           | 25476 | 25472  | 25484 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                             | 2484            | 40777 | 48436  | 48436 | 6       |
| revokeSessionKey                                                                       | 1709            | 1709  | 1709   | 1709  | 2       |
| sessionKeys                                                                            | 1921            | 1921  | 1921   | 1921  | 3       |
| transferOwnership                                                                      | 23471           | 23471 | 23471  | 23471 | 2       |
| validateUserOp                                                                         | 6246            | 8523  | 7987   | 17105 | 49      |
| version                                                                                | 1355            | 1355  | 1355   | 1355  | 3       |



