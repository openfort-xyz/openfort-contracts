
Running 5 tests for test/foundry/4337/Specific4337Tests.t.sol:Specific4337Tests
[32m[PASS][0m testToken():(address) (gas: 2382)
[32m[PASS][0m testValidateUserOp() (gas: 169836)
[32m[PASS][0m testValidateUserOpSessionKey() (gas: 197393)
[32m[PASS][0m testWrongValidateUserOp() (gas: 172311)
[32m[PASS][0m testWrongValidateUserOpSessionKey() (gas: 199551)
Test result: [32mok[0m. 5 passed; 0 failed; finished in 2.12s

Running 14 tests for test/foundry/paymaster/OpenfortPaymasterTest.t.sol:OpenfortPaymasterTest
[32m[PASS][0m testEntryPointDepositToPaymaster() (gas: 45021)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigExecBatchInsufficientERC20() (gas: 318819)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigSmallApprove() (gas: 278837)
[32m[PASS][0m testInitialParameters() (gas: 13782)
[32m[PASS][0m testParsePaymasterDataERC20() (gas: 35525)
[32m[PASS][0m testParsePaymasterDataNative() (gas: 33262)
[32m[PASS][0m testPaymasterAddStake() (gas: 47814)
[32m[PASS][0m testPaymasterUserOpERC20ValidSig() (gas: 301095)
[32m[PASS][0m testPaymasterUserOpERC20ValidSigExecBatch() (gas: 341904)
[32m[PASS][0m testPaymasterUserOpNativeValidSig() (gas: 231355)
[32m[PASS][0m testPaymasterUserOpNativeValidSigExecBatch() (gas: 273683)
[32m[PASS][0m testPaymasterUserOpWrongSig() (gas: 133668)
[32m[PASS][0m testPaymasterUserOpWrongSigLength() (gas: 103771)
[32m[PASS][0m testToken():(address) (gas: 2383)
Test result: [32mok[0m. 14 passed; 0 failed; finished in 2.47s

Running 29 tests for test/foundry/core/upgradeable/UpgradeableOpenfortAccountTest.t.sol:UpgradeableOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 338216)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 487934)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 402591)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 315819)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 589128)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 679276)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 454256)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 587105)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 492954)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 334320)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 516145)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 333044)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 507660)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 336864)
[32m[PASS][0m testIncrementCounterDirect() (gas: 329456)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 481109)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 493318)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 510986)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 480846)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 536253)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 559596)
[32m[PASS][0m testMintTokenAccount() (gas: 510046)
[32m[PASS][0m testReceiveNativeToken() (gas: 305393)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 592153)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 702270)
[32m[PASS][0m testSimulateValidation() (gas: 406760)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 414100)
[32m[PASS][0m testUpgradeAccount() (gas: 2632647)
Test result: [32mok[0m. 29 passed; 0 failed; finished in 2.81s

Running 30 tests for test/foundry/core/static/StaticOpenfortAccountTest.t.sol:StaticOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 174608)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 323909)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 225805)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 139501)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 256254)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 514123)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 290866)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 422830)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 329341)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 170899)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 385875)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 352466)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 169791)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 343981)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 173443)
[32m[PASS][0m testIncrementCounterDirect() (gas: 166209)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 317445)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 329676)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 347150)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 317255)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 372329)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 395449)
[32m[PASS][0m testMintTokenAccount() (gas: 346382)
[32m[PASS][0m testReceiveNativeToken() (gas: 142149)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 427655)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 536938)
[32m[PASS][0m testSimulateValidation() (gas: 243564)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 250417)
[32m[PASS][0m testUpdateEntryPoint() (gas: 2514884)
Test result: [32mok[0m. 30 passed; 0 failed; finished in 3.01s
| EntryPoint contract |                 |      |        |      |         |
|---------------------|-----------------|------|--------|------|---------|
| Deployment Cost     | Deployment Size |      |        |      |         |
| 0                   | 0               |      |        |      |         |
| Function Name       | min             | avg  | median | max  | # calls |
| getNonce            | 2688            | 2688 | 2688   | 2688 | 1       |
| getUserOpHash       | 2149            | 2149 | 2149   | 2149 | 2       |


| contracts/core/static/StaticOpenfortAccount.sol:StaticOpenfortAccount contract |                 |       |        |       |         |
|--------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                | Deployment Size |       |        |       |         |
| 1944866                                                                        | 9878            |       |        |       |         |
| Function Name                                                                  | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                | 1996            | 1996  | 1996   | 1996  | 2       |
| entryPoint                                                                     | 421             | 421   | 421    | 421   | 2       |
| execute                                                                        | 3677            | 22026 | 21715  | 32877 | 20      |
| executeBatch                                                                   | 25700           | 40699 | 48365  | 55365 | 5       |
| initialize                                                                     | 74330           | 74330 | 74330  | 74330 | 48      |
| receive                                                                        | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                      | 25068           | 25074 | 25068  | 25086 | 9       |
| registerSessionKey(address,uint48,uint48,uint48)                               | 24470           | 24473 | 24470  | 24479 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                     | 23683           | 43428 | 47377  | 47377 | 6       |
| revokeSessionKey                                                               | 799             | 799   | 799    | 799   | 2       |
| sessionKeys                                                                    | 810             | 810   | 810    | 810   | 3       |
| transferOwnership                                                              | 22375           | 22375 | 22375  | 22375 | 2       |
| updateEntryPoint                                                               | 651             | 1483  | 1483   | 2315  | 2       |
| validateUserOp                                                                 | 5262            | 7693  | 6997   | 15767 | 61      |


| contracts/core/static/StaticOpenfortFactory.sol:StaticOpenfortFactory contract |                 |        |        |        |         |
|--------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                | Deployment Size |        |        |        |         |
| 2345458                                                                        | 12086           |        |        |        |         |
| Function Name                                                                  | min             | avg    | median | max    | # calls |
| createAccount                                                                  | 1273            | 120770 | 124164 | 124164 | 48      |
| createAccountWithNonce                                                         | 121693          | 121693 | 121693 | 121693 | 1       |
| getAddress                                                                     | 830             | 830    | 830    | 830    | 4       |


| contracts/core/upgradeable/UpgradeableOpenfortAccount.sol:UpgradeableOpenfortAccount contract |                 |       |        |       |         |
|-----------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                               | Deployment Size |       |        |       |         |
| 2291945                                                                                       | 11655           |       |        |       |         |
| Function Name                                                                                 | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                               | 1944            | 1944  | 1944   | 1944  | 2       |
| execute                                                                                       | 3699            | 21399 | 21673  | 32899 | 17      |
| executeBatch                                                                                  | 25700           | 25700 | 25700  | 25700 | 2       |
| initialize                                                                                    | 72897           | 72897 | 72897  | 72897 | 29      |
| proxiableUUID                                                                                 | 374             | 374   | 374    | 374   | 1       |
| receive                                                                                       | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                                     | 25046           | 25053 | 25046  | 25064 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                              | 24470           | 24473 | 24470  | 24479 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                    | 23738           | 42702 | 47443  | 47443 | 5       |
| revokeSessionKey                                                                              | 821             | 821   | 821    | 821   | 2       |
| sessionKeys                                                                                   | 832             | 832   | 832    | 832   | 2       |
| transferOwnership                                                                             | 22375           | 22375 | 22375  | 22375 | 2       |
| upgradeTo                                                                                     | 890             | 3226  | 3226   | 5562  | 2       |
| validateUserOp                                                                                | 5262            | 7146  | 6997   | 12638 | 47      |


| contracts/core/upgradeable/UpgradeableOpenfortFactory.sol:UpgradeableOpenfortFactory contract |                 |        |        |        |         |
|-----------------------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                               | Deployment Size |        |        |        |         |
| 3151391                                                                                       | 16168           |        |        |        |         |
| Function Name                                                                                 | min             | avg    | median | max    | # calls |
| createAccount                                                                                 | 8147            | 277486 | 287195 | 287195 | 29      |
| createAccountWithNonce                                                                        | 284749          | 284749 | 284749 | 284749 | 1       |
| getAddress                                                                                    | 7517            | 7517   | 7517   | 7517   | 4       |


| contracts/paymaster/OpenfortPaymaster.sol:OpenfortPaymaster contract |                 |       |        |       |         |
|----------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                      | Deployment Size |       |        |       |         |
| 1230277                                                              | 6419            |       |        |       |         |
| Function Name                                                        | min             | avg   | median | max   | # calls |
| addStake                                                             | 520             | 30701 | 33420  | 33420 | 16      |
| deposit                                                              | 9845            | 32618 | 34245  | 34245 | 15      |
| entryPoint                                                           | 261             | 261   | 261    | 261   | 1       |
| getDeposit                                                           | 1181            | 2104  | 1181   | 3181  | 13      |
| getHash                                                              | 3462            | 5053  | 4998   | 6535  | 12      |
| owner                                                                | 2365            | 2365  | 2365   | 2365  | 7       |
| parsePaymasterAndData                                                | 1516            | 1516  | 1516   | 1516  | 2       |
| postOp                                                               | 1433            | 11881 | 3963   | 30247 | 6       |
| validatePaymasterUserOp                                              | 1694            | 27020 | 30443  | 31266 | 8       |


| node_modules/@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol:ERC1967Proxy contract |                 |       |        |       |         |
|-------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                           | Deployment Size |       |        |       |         |
| 241146                                                                                    | 2087            |       |        |       |         |
| Function Name                                                                             | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                           | 2258            | 2258  | 2258   | 2258  | 2       |
| execute                                                                                   | 4109            | 21820 | 22089  | 33309 | 17      |
| executeBatch                                                                              | 26212           | 26212 | 26212  | 26212 | 2       |
| receive                                                                                   | 454             | 454   | 454    | 454   | 2       |
| registerSessionKey(address,uint48,uint48)                                                 | 25450           | 25457 | 25450  | 25468 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                          | 24880           | 24883 | 24880  | 24889 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                | 24239           | 43144 | 47871  | 47871 | 5       |
| revokeSessionKey                                                                          | 1238            | 1238  | 1238   | 1238  | 2       |
| sessionKeys                                                                               | 1248            | 1248  | 1248   | 1248  | 2       |
| transferOwnership                                                                         | 22770           | 22770 | 22770  | 22770 | 2       |
| upgradeTo                                                                                 | 1301            | 3629  | 3629   | 5957  | 2       |
| validateUserOp                                                                            | 5808            | 7720  | 7549   | 13288 | 47      |



