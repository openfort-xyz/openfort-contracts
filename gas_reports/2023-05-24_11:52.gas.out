
Running 5 tests for test/foundry/4337/Specific4337Tests.t.sol:Specific4337Tests
[32m[PASS][0m testToken():(address) (gas: 2382)
[32m[PASS][0m testValidateUserOp() (gas: 169841)
[32m[PASS][0m testValidateUserOpSessionKey() (gas: 197573)
[32m[PASS][0m testWrongValidateUserOp() (gas: 172308)
[32m[PASS][0m testWrongValidateUserOpSessionKey() (gas: 199548)
Test result: [32mok[0m. 5 passed; 0 failed; finished in 3.60s

Running 14 tests for test/foundry/paymaster/OpenfortPaymasterTest.t.sol:OpenfortPaymasterTest
[32m[PASS][0m testEntryPointDepositToPaymaster() (gas: 45021)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigExecBatchInsufficientERC20() (gas: 319697)
[32m[PASS][0m testFailPaymasterUserOpERC20ValidSigSmallApprove() (gas: 279339)
[32m[PASS][0m testInitialParameters() (gas: 13738)
[32m[PASS][0m testParsePaymasterDataERC20() (gas: 35503)
[32m[PASS][0m testParsePaymasterDataNative() (gas: 33240)
[32m[PASS][0m testPaymasterAddStake() (gas: 47814)
[32m[PASS][0m testPaymasterUserOpERC20ValidSig() (gas: 301531)
[32m[PASS][0m testPaymasterUserOpERC20ValidSigExecBatch() (gas: 342716)
[32m[PASS][0m testPaymasterUserOpNativeValidSig() (gas: 231573)
[32m[PASS][0m testPaymasterUserOpNativeValidSigExecBatch() (gas: 274429)
[32m[PASS][0m testPaymasterUserOpWrongSig() (gas: 133668)
[32m[PASS][0m testPaymasterUserOpWrongSigLength() (gas: 103771)
[32m[PASS][0m testToken():(address) (gas: 2383)
Test result: [32mok[0m. 14 passed; 0 failed; finished in 4.04s

Running 29 tests for test/foundry/core/upgradeable/UpgradeableOpenfortAccountTest.t.sol:UpgradeableOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 338507)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 488225)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 402812)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 315829)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 589159)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 681002)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 454250)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 588084)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 493122)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 334330)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 516389)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 333060)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 508432)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 336874)
[32m[PASS][0m testIncrementCounterDirect() (gas: 329747)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 481400)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 494375)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 511627)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 481206)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 537306)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 562617)
[32m[PASS][0m testMintTokenAccount() (gas: 510477)
[32m[PASS][0m testReceiveNativeToken() (gas: 305403)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 593285)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 704243)
[32m[PASS][0m testSimulateValidation() (gas: 406770)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 414321)
[32m[PASS][0m testUpgradeAccount() (gas: 2699014)
Test result: [32mok[0m. 29 passed; 0 failed; finished in 4.76s

Running 29 tests for test/foundry/core/static/StaticOpenfortAccountTest.t.sol:StaticOpenfortAccountTest
[32m[PASS][0m testChangeOwnershipAndCountDirect() (gas: 174831)
[32m[PASS][0m testChangeOwnershipAndCountEntryPoint() (gas: 324154)
[32m[PASS][0m testCreateAccountViaEntryPoint() (gas: 225974)
[32m[PASS][0m testCreateAccountViaFactory() (gas: 139615)
[32m[PASS][0m testCreateAccountViaFactoryWithNonce() (gas: 256278)
[32m[PASS][0m testFailAttackRegisterSessionKeyViaEntrypoint2ndKey() (gas: 515764)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyNotregistered() (gas: 290855)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimit() (gas: 423763)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyReachLimitBatching() (gas: 329482)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyRevoked() (gas: 170904)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingBatchWrongAddress() (gas: 352705)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingTooBig() (gas: 169802)
[32m[PASS][0m testFailIncrementCounterViaSessionKeyWhitelistingWrongAddress() (gas: 344726)
[32m[PASS][0m testFailRevokeSessionKeyInvalidUser() (gas: 173448)
[32m[PASS][0m testIncrementCounterDirect() (gas: 166454)
[32m[PASS][0m testIncrementCounterViaEntrypoint() (gas: 317668)
[32m[PASS][0m testIncrementCounterViaEntrypointBatching() (gas: 330605)
[32m[PASS][0m testIncrementCounterViaSessionKey() (gas: 347745)
[32m[PASS][0m testIncrementCounterViaSessionKeyExpired() (gas: 317588)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelisting() (gas: 373336)
[32m[PASS][0m testIncrementCounterViaSessionKeyWhitelistingBatch() (gas: 398320)
[32m[PASS][0m testMintTokenAccount() (gas: 346757)
[32m[PASS][0m testReceiveNativeToken() (gas: 142154)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint() (gas: 428718)
[32m[PASS][0m testRegisterSessionKeyViaEntrypoint2ndKey() (gas: 538819)
[32m[PASS][0m testSimulateValidation() (gas: 243569)
[32m[PASS][0m testToken():(address) (gas: 2426)
[32m[PASS][0m testTransferOutNativeToken() (gas: 250586)
[32m[PASS][0m testUpdateEntryPoint() (gas: 2593340)
Test result: [32mok[0m. 29 passed; 0 failed; finished in 4.76s
| EntryPoint contract |                 |      |        |      |         |
|---------------------|-----------------|------|--------|------|---------|
| Deployment Cost     | Deployment Size |      |        |      |         |
| 0                   | 0               |      |        |      |         |
| Function Name       | min             | avg  | median | max  | # calls |
| getNonce            | 2688            | 2688 | 2688   | 2688 | 1       |
| getUserOpHash       | 2149            | 2149 | 2149   | 2149 | 2       |


| contracts/core/static/StaticOpenfortAccount.sol:StaticOpenfortAccount contract |                 |       |        |       |         |
|--------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                | Deployment Size |       |        |       |         |
| 2020553                                                                        | 10256           |       |        |       |         |
| Function Name                                                                  | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                | 1996            | 1996  | 1996   | 1996  | 2       |
| entryPoint                                                                     | 421             | 421   | 421    | 421   | 2       |
| execute                                                                        | 3841            | 22331 | 21955  | 33041 | 20      |
| executeBatch                                                                   | 26624           | 41529 | 49133  | 56133 | 5       |
| initialize                                                                     | 74330           | 74330 | 74330  | 74330 | 47      |
| receive                                                                        | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                      | 25068           | 25074 | 25068  | 25086 | 9       |
| registerSessionKey(address,uint48,uint48,uint48)                               | 24470           | 24473 | 24470  | 24479 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                     | 23689           | 42700 | 47453  | 47453 | 5       |
| revokeSessionKey                                                               | 799             | 799   | 799    | 799   | 2       |
| sessionKeys                                                                    | 810             | 810   | 810    | 810   | 2       |
| transferOwnership                                                              | 22375           | 22375 | 22375  | 22375 | 2       |
| updateEntryPoint                                                               | 651             | 1483  | 1483   | 2315  | 2       |
| validateUserOp                                                                 | 5262            | 7538  | 7172   | 13582 | 59      |


| contracts/core/static/StaticOpenfortFactory.sol:StaticOpenfortFactory contract |                 |        |        |        |         |
|--------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                | Deployment Size |        |        |        |         |
| 2423832                                                                        | 12477           |        |        |        |         |
| Function Name                                                                  | min             | avg    | median | max    | # calls |
| createAccount                                                                  | 1284            | 120703 | 124169 | 124169 | 47      |
| createAccountWithNonce                                                         | 121701          | 121701 | 121701 | 121701 | 1       |
| getAddress                                                                     | 830             | 830    | 830    | 830    | 4       |


| contracts/core/upgradeable/UpgradeableOpenfortAccount.sol:UpgradeableOpenfortAccount contract |                 |       |        |       |         |
|-----------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                               | Deployment Size |       |        |       |         |
| 2358227                                                                                       | 11986           |       |        |       |         |
| Function Name                                                                                 | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                               | 1944            | 1944  | 1944   | 1944  | 2       |
| execute                                                                                       | 3910            | 21734 | 21954  | 33110 | 17      |
| executeBatch                                                                                  | 26747           | 26747 | 26747  | 26747 | 2       |
| initialize                                                                                    | 72897           | 72897 | 72897  | 72897 | 29      |
| proxiableUUID                                                                                 | 374             | 374   | 374    | 374   | 1       |
| receive                                                                                       | 55              | 55    | 55     | 55    | 2       |
| registerSessionKey(address,uint48,uint48)                                                     | 25046           | 25053 | 25046  | 25064 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                              | 24470           | 24473 | 24470  | 24479 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                    | 23744           | 42764 | 47519  | 47519 | 5       |
| revokeSessionKey                                                                              | 821             | 821   | 821    | 821   | 2       |
| sessionKeys                                                                                   | 832             | 832   | 832    | 832   | 2       |
| transferOwnership                                                                             | 22375           | 22375 | 22375  | 22375 | 2       |
| upgradeTo                                                                                     | 890             | 3226  | 3226   | 5562  | 2       |
| validateUserOp                                                                                | 5262            | 7292  | 7172   | 13582 | 47      |


| contracts/core/upgradeable/UpgradeableOpenfortFactory.sol:UpgradeableOpenfortFactory contract |                 |        |        |        |         |
|-----------------------------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                                               | Deployment Size |        |        |        |         |
| 3221351                                                                                       | 16517           |        |        |        |         |
| Function Name                                                                                 | min             | avg    | median | max    | # calls |
| createAccount                                                                                 | 8158            | 277496 | 287205 | 287205 | 29      |
| createAccountWithNonce                                                                        | 284759          | 284759 | 284759 | 284759 | 1       |
| getAddress                                                                                    | 7517            | 7517   | 7517   | 7517   | 4       |


| contracts/paymaster/OpenfortPaymaster.sol:OpenfortPaymaster contract |                 |       |        |       |         |
|----------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                      | Deployment Size |       |        |       |         |
| 1236883                                                              | 6452            |       |        |       |         |
| Function Name                                                        | min             | avg   | median | max   | # calls |
| addStake                                                             | 520             | 30701 | 33420  | 33420 | 16      |
| deposit                                                              | 9845            | 32618 | 34245  | 34245 | 15      |
| entryPoint                                                           | 239             | 239   | 239    | 239   | 1       |
| getDeposit                                                           | 1181            | 2104  | 1181   | 3181  | 13      |
| getHash                                                              | 3462            | 5053  | 4998   | 6535  | 12      |
| owner                                                                | 2343            | 2343  | 2343   | 2343  | 7       |
| parsePaymasterAndData                                                | 1494            | 1494  | 1494   | 1494  | 2       |
| postOp                                                               | 1499            | 11947 | 4029   | 30313 | 6       |
| validatePaymasterUserOp                                              | 1694            | 27020 | 30443  | 31266 | 8       |


| node_modules/@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol:ERC1967Proxy contract |                 |       |        |       |         |
|-------------------------------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                                           | Deployment Size |       |        |       |         |
| 241146                                                                                    | 2087            |       |        |       |         |
| Function Name                                                                             | min             | avg   | median | max   | # calls |
| acceptOwnership                                                                           | 2258            | 2258  | 2258   | 2258  | 2       |
| execute                                                                                   | 4320            | 22154 | 22370  | 33520 | 17      |
| executeBatch                                                                              | 27259           | 27259 | 27259  | 27259 | 2       |
| receive                                                                                   | 454             | 454   | 454    | 454   | 2       |
| registerSessionKey(address,uint48,uint48)                                                 | 25450           | 25457 | 25450  | 25468 | 7       |
| registerSessionKey(address,uint48,uint48,uint48)                                          | 24880           | 24883 | 24880  | 24889 | 3       |
| registerSessionKey(address,uint48,uint48,uint48,address[])                                | 24245           | 43206 | 47947  | 47947 | 5       |
| revokeSessionKey                                                                          | 1238            | 1238  | 1238   | 1238  | 2       |
| sessionKeys                                                                               | 1248            | 1248  | 1248   | 1248  | 2       |
| transferOwnership                                                                         | 22770           | 22770 | 22770  | 22770 | 2       |
| upgradeTo                                                                                 | 1301            | 3629  | 3629   | 5957  | 2       |
| validateUserOp                                                                            | 5808            | 7866  | 7724   | 14232 | 47      |



